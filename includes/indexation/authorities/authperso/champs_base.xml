<?xml version="1.0" encoding="iso-8859-1"?>

<!-- 
****************************************************************************************
© 2002-2004 PMB Services / www.sigb.net pmb@sigb.net et contributeurs (voir www.sigb.net)
****************************************************************************************
$Id: champs_base.xml,v 1.17 2024/10/04 06:40:15 dgoron Exp $ -->

<indexation>

	<!-- Table d'origine (référence)-->
	<reference>authperso_authorities</reference>
	<!-- Clé primaire de la table de référence -->
	<referencekey>id_authperso_authority</referencekey>

	<!-- Concepts -->	
	<field name="index_concept_label" id="100!!id_authperso!!001" datatype="concept">
		<callable name="index_concept_label" id="01" class_path="./classes/index_concept.class.php" class_name="index_concept" method="get_concepts_labels_from_entity" parameters="12" pond="110"/>
	</field>	
	
	<field name="index_concept_label_autopostage" id="100!!id_authperso!!002" datatype="concept">
		<callable name="index_generic_concept_label_autopostage" id="01" class_path="./classes/index_concept.class.php" class_name="index_concept" method="get_generic_concepts_labels_from_entity" parameters="12" pond="50"/>
		<callable name="index_specific_concept_label_autopostage" id="02" class_path="./classes/index_concept.class.php" class_name="index_concept" method="get_specific_concepts_labels_from_entity" parameters="12" pond="50"/>
	</field>

<!-- 	<field name="authority_champs_perso" external="yes" id="100000" datatype="custom_field" > -->
<!-- 		<table>authperso</table> -->
<!-- 	</field> -->
	
	<!-- les CPs -->
	<!-- d'autorités perso -->
	<field name="authority_champs_perso" external="yes" id="100!!id_authperso!!100" datatype="custom_field" >
		<table>authperso</table>
	</field>
			
	<!-- Autorités liées -->
	<field name="aut_link" external="yes" id="100!!id_authperso!!901" datatype="aut_link">
		<table name='authors' />
		<isbd name="isbd" class_name="author" id="06" pond="0"/>
	</field>
	<field name="aut_link" external="yes" id="100!!id_authperso!!902" datatype="aut_link">
		<table name='categories' />
		<isbd name="isbd" class_name="categories" id="02" pond="0"/>
	</field>
	<field name="aut_link" external="yes" id="100!!id_authperso!!903" datatype="aut_link">
		<table name='publishers' />
		<isbd name="isbd" class_name="editeur" id="09" pond="0"/>
	</field>
	<field name="aut_link" external="yes" id="100!!id_authperso!!904" datatype="aut_link">
		<table name="collections" />
		<isbd name="isbd" class_name="collection" id="02" pond="0"/>
	</field>
	<field name="aut_link" external="yes" id="100!!id_authperso!!905" datatype="aut_link">
		<table name="sub_collections" />
		<isbd name="isbd" class_name="subcollection" id="02" pond="0"/>
	</field>
	<field name="aut_link" external="yes" id="100!!id_authperso!!906" datatype="aut_link">
		<table name="series" />
		<isbd name="isbd" class_name="serie" id="02" pond="0"/>
	</field>
	<field name="aut_link" external="yes" id="100!!id_authperso!!907" datatype="aut_link">
		<table name='titres_uniformes' />
		<isbd name="isbd" class_name="titre_uniforme" id="08" pond="0"/>
	</field>
	<field name="aut_link" external="yes" id="100!!id_authperso!!908" datatype="aut_link">
		<table name="indexint" />
		<isbd name="isbd" class_name="indexint" id="03" pond="0"/>
	</field>
	<field name="aut_link" external="yes" id="100!!id_authperso!!909" datatype="aut_link">
		<table name="authperso_authorities" alias="authperso_link" />
		<isbd name="isbd" class_name="authperso" id="02" pond="80"/>
	</field>
	<field name="aut_link" id="100!!id_authperso!!910" datatype="aut_link">
		<callable name="aut_link_concept_label" id="01" class_path="./classes/index_concept.class.php" class_name="index_concept" method="get_concepts_labels_from_linked_authority" parameters="1000,!!id_authperso!!" pond="100"/>
	</field>
	
	<!-- Common fields -->
	<field name="297" external="yes" id="001" keepEmptyWord="yes">
		<table name="authorities_statuts">
			<filter>authorities.type_object=9</filter>
			<tablefield name="authorities_statut_label" id="01" pond="100">authorities_statut_label</tablefield>
			<tablekey>id_authorities_statut</tablekey>
			<idkey>id_authorities_statut</idkey>
			<link type="nn">
				<table>authorities</table>
				<referencefield>num_object</referencefield>
				<externalfield>num_statut</externalfield>
			</link>
		</table>
	</field>
	
	<!-- table authors -->
	<field name="aut_responsability_form_responsability_authperso" external="yes" id="100!!id_authperso!!910" datatype="author" keepEmptyWord="yes">
		<table name="authors">
			<tablefield name="201" id="01" pond="110">author_name</tablefield>
			<tablefield name="202" id="02" pond="110">author_rejete</tablefield>
			<tablefield name="713" id="03" pond="100">author_date</tablefield>
			<tablefield name="147" id="04" pond="100">author_web</tablefield>
			<tablefield name="707" id="05" pond="100">author_comment</tablefield>
			<tablekey>author_id</tablekey>
			<idkey>author_id</idkey>
			<link type="nn">
				<table>responsability_authperso</table>
				<referencefield>responsability_authperso_num  and responsability_authperso_type=0</referencefield>
				<externalfield>responsability_authperso_author</externalfield>
			</link>
		</table>
	</field>
	
	<!-- Evenement  -->	
	<field name="event" external="yes" id="100!!id_authperso!!911" datatype="event">
		<table name="titres_uniformes">
			<tablefield name="aut_titre_uniforme_form_nom" id="01" pond="100">tu_name</tablefield>
			<tablefield name="aut_titre_uniforme_form_tonalite" id="02" pond="100">tu_tonalite</tablefield>
			<tablefield name="aut_titre_uniforme_commentaire" id="03" pond="100">tu_comment</tablefield>
			<tablefield name="aut_oeuvre_form_forme" id="09" pond="100">tu_forme</tablefield>
			<tablefield name="aut_oeuvre_form_date" id="10" pond="100">tu_date</tablefield>
			<tablefield name="aut_oeuvre_form_sujet" id="11" pond="100">tu_sujet</tablefield>
			<tablefield name="aut_oeuvre_form_lieu" id="12" pond="100">tu_lieu</tablefield>
			<tablefield name="aut_oeuvre_form_histoire" id="13" pond="100">tu_histoire</tablefield>
			<tablefield name="aut_oeuvre_form_caracteristique" id="14" pond="100">tu_caracteristique</tablefield>
			<tablefield name="aut_oeuvre_form_public" id="15" pond="100">tu_public</tablefield>
			<tablefield name="aut_oeuvre_form_contexte" id="16" pond="100">tu_contexte</tablefield>
			<tablefield name="aut_oeuvre_form_coordonnees" id="17" pond="100">tu_coordonnees</tablefield>
			<tablefield name="aut_oeuvre_form_equinoxe" id="18" pond="100">tu_equinoxe</tablefield>
			<tablekey>tu_id</tablekey>
			<idkey>tu_id</idkey>
			<link type="nn">
				<table>tu_oeuvres_events</table>
				<referencefield>oeuvre_event_authperso_authority_num</referencefield>
				<externalfield>oeuvre_event_tu_num</externalfield>
			</link>
		</table>
	</field>
</indexation>